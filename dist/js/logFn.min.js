/**
 * loginplus - Union loginPlus
 * @author : yefengbar
 * @version : v0.2.1
 * @website : yefengbar.com
 * @createtime : 2016-4-19 11:05
 * @edittime :2016-11-15 17:30:44
 **/
!function(n,s){Union=window.Union||{};var o=o||[];o.push(["_setAccount","30055902"]),Union.logFn={getPassUrl:"http://web.7k7k.com/user/find_passport.php",getkkUrl:"http://zc.7k7k.com/get_pre_kk?callback=",chkNameUrl:"http://web.7k7k.com/source/core_Post.php",doLogUrl:"http://web.7k7k.com/source/Post.php",cssUrl:"http://n.7k7kimg.cn/uploads/cdn/api/loginPlus/css/logFn.min.css?v=0.2.0",idcardUrl:"http://web.7k7k.com/api/get7k_fcm.php",logDomId:"#union",doMain:"web.7k7k.com",remName:0,isCheck:0,callBacks:"",gVaildIdcard:0,msg:["这是系统自动分配给你的kk号","4-32位数字、字母、或组合","6-32位数字、字母、_或组合","两次密码不一致","用户名已被注册","用户名可以使用","上次使用QQ登陆","上次使用微信登陆","上次使用账号登陆","身份证上的姓名","身份证号码","真实姓名为2-12个汉字","身份证号码为15或18位数字","注册失败，你还是未成年！"],userInfo:{name:"",pass:"",status:0},defaults:{autokk:0,qqLogId:11715896,qqlogType:"qqlogin",qqlogCallback:encodeURIComponent(location.href),logAction:0,logedCallUrl:location.href,regAction:0,showSave:1,saveInfo:"http://web.7k7k.com/api/7k7ktxt.php?",refer:3841,isVaildIdcard:1},toggleUi:function(s){var a=n(this.logDomId+" .un_tabs a"),e=n(this.logDomId+" .un_tabs a.cur").index();if(a.removeClass("cur"),a.eq(s).addClass("cur"),n(".un_mod_log .un_tips,.un_mod_reg .un_tips").html("").removeClass("no yes"),n(".un_msg .logs").show(),n(".un_msg .saves").hide(),n(".un_mod_save").hide(),Union.logFn.resetHack(),0==s){n(".un_mod_log").show(),n(".un_mod_reg").hide(),n(".un_tabs span").animate({left:"168px"},150),0==e?o.push(["_trackEvent","web7k通行证","登录","登录标签","",""]):o.push(["_trackEvent","web7k通行证","注册","登录标签","",""]);var t=n(this.logDomId).height()/2;n(this.logDomId).animate({"margin-top":"-"+t+"px"},150)}else{Union.logFn.defaults.autokk&&Union.logFn.autoKk(),n(".un_mod_log").hide(),n(".un_mod_reg").show(),n(".un_tabs span").animate({left:"277px"},150),n(Union.logFn.logDomId+" #un_rname").bind("blur",function(){this.value?Union.logFn.checkName(this.value):n(".un_mod_reg .un_tips.rname").html(Union.logFn.msg[1]).addClass("no")}),1==Union.logFn.defaults.isVaildIdcard&&n.ajax({type:"post",url:Union.logFn.idcardUrl,async:!1,data:{},dataType:"jsonp",success:function(s){1==s.status?(n("#union .rrname,#union .rrnum").show(),Union.logFn.gVaildIdcard=1):(n("#union .rrname,#union .rrnum").hide(),Union.logFn.gVaildIdcard=0)}}),0==e?o.push(["_trackEvent","web7k通行证","登录","注册标签","",""]):o.push(["_trackEvent","web7k通行证","注册","注册标签","",""]);var t=n(this.logDomId).height()/2;n(this.logDomId).animate({"margin-top":"-"+t+"px"},150)}},config:function(s){n.extend(Union.logFn.defaults,s)},init:function(){location.host==this.doMain?(this.addCSS(Union.logFn.cssUrl),logHtml='<IFRAME id=union_mask src="about:blank" frameBorder=no style="display:none"></IFRAME>		<div class="union_warp" id="union" style="display:none">			<div class="un_con">				<div class="un_tit">					<a href="http://web.7k7k.com" target="_blank" class="un_logo"></a>					<div class="un_tabs">						<a href="javascript:;" class="cur">用户登录</a>						<a href="javascript:;">用户注册</a>						<span></span>					</div>					<a href="javascript:;" class="un_close"></a>				</div>				<div class="un_login">					<div class="un_inps un_mod_log">						<div class="un_inp name">							<span>用户名&nbsp;:</span>							<input type="text" id="un_name" value="用户名/邮箱/KK号" placeholder="用户名/邮箱/KK号" />						</div>						<div class="un_tips name"></div>						<div class="un_inp pass">							<span>密　码&nbsp;:</span>							<input type="password" id="un_pass" value="" />						</div>						<div class="un_tips pass"></div>						<div class="un_rem">							<span class="un_check"></span>							<span class="un_lable">记住登录账号</span>							<a href="http://web.7k7k.com/user/find_passport.php" target="_blank" class="un_lose_pass">忘记密码?</a>							<div class="clear"></div>						</div>						<div class="un_btns">							<a href="javascript:;" class="un_btns_log">登录</a>							<a href="javascript:;" class="un_btns_reg">注册</a>							<div class="clear"></div>						</div>					</div>					<div class="un_inps un_mod_reg">						<div class="un_inp rname">							<span>用户名&nbsp;:</span>							<input type="text" id="un_rname" value="" placeholder="'+Union.logFn.msg[1]+'" />						</div>						<div class="un_tips rname"></div>						<div class="un_inp rpass">							<span>密　码&nbsp;:</span>							<input type="password" id="un_rpass" value="" placeholder="'+Union.logFn.msg[2]+'" />						</div>						<div class="un_tips rpass"></div>						<div class="un_inp surePass rpass">							<span>确认密码&nbsp;:</span>							<input type="password" id="un_repass" value="" />						</div>						<div class="un_tips repass"></div>						<div class="un_inp rrname" style="display: none">							<span>姓　名&nbsp;:</span>							<input type="text" id="un_rrname" value="" placeholder="'+Union.logFn.msg[9]+'" />						</div>						<div class="un_tips rrname" style="display: none"></div>						<div class="un_inp rrnum" style="display: none">							<span>身份证&nbsp;:</span>							<input type="text" id="un_rrnum" value="" placeholder="'+Union.logFn.msg[10]+'" />						</div>						<div class="un_tips rrnum" style="display: none"></div>						<div class="un_rem">							<span class="un_check"></span>							<a href="http://www.7k7k.com/html/duty.htm" target="_blank" class="un_lose_pass">已阅读《用户服务协议》</a>							<div class="clear"></div>						</div>						<div class="un_btns">							<a href="javascript:;" class="un_btns_regl">注册</a>							<div class="clear"></div>						</div>					</div>					<div class="un_inps un_mod_save">						<p class="save_tit">注册成功！</p>						<div class="save_info">							<div class="savediv save_name">								<span class="sdtit">用户名:</span>								<span class="nameTxt"></span>							</div>							<div class="savediv save_pass">								<span class="sdtit">密码:</span>								<span class="passTxt"></span>							</div>						</div>						<p class="saveTxt">赶紧拿笔记下，或<a href="">保存至桌面</a></p>						<div class="un_btns">							<a href="javascript:;" class="un_btns_done">完成</a>							<div class="clear"></div>						</div>					</div>					<div class="un_msg">						<div class="logs">							<a href="javascript:;" class="un_log_qq"></a>							<p class="un_logName"></p>							<p class="un_logInfo"></p>						</div>						<div class="saves">							<p class="tipst">温馨提示</p>							<p class="tipTxt">为抵御盗号风险，90%的用户都会选择<a target="_blank" href="http://web.7k7k.com/user/index.php">设置密码保护</a></p>						</div>					</div>					<div class="clear"></div>				</div>			</div>			<div class="un_bot"></div>		</div>',n("body").append(logHtml),Union.logFn.showName(),n(".un_mod_log .un_inp input").bind("keypress",function(n){var n=n||event;13==n.keyCode&&Union.logFn.doLog()}),n(".un_mod_reg .un_inp input").bind("keypress",function(n){var n=n||event;13==n.keyCode&&Union.logFn.doReg()})):window.document.domain=Union.logFn.doMain},open:function(s){var o=n(this.logDomId).height()/2;n(".un_mod_log .un_tips,.un_mod_reg .un_tips").html("").removeClass("no yes"),n(this.logDomId+"_mask").fadeIn().css({display:"block"}),n(this.logDomId).show().animate({top:"50%",opacity:"1","margin-top":"-"+o+"px"},150),"function"==typeof s&&(Union.logFn.callBacks=s)},close:function(){n(this.logDomId).animate({top:"-100%",opacity:"0"},150,function(){n(this).hide(),n(Union.logFn.logDomId+"_mask").fadeOut()})},addCSS:function(n){var s=document.createElement("link");s.type="text/css",s.rel="stylesheet",s.href=n,document.getElementsByTagName("head")[0].appendChild(s)},addJS:function(n){var s=document.getElementsByTagName("HEAD").item(0),o=document.createElement("script");o.type="text/javascript",o.src=n,s.appendChild(o)},doLog:function(){o.push(["_trackEvent","web7k通行证","登录","登录按钮","",""]);var s=n("#un_name").val(),a=n("#un_pass").val(),e=Union.logFn.remName;Union.logFn.resetHack(),n(".un_mod_log .un_tips").html("").removeClass("yes no"),s&&/^[a-zA-Z0-9][a-zA-Z0-9_.@]{4,32}$/.test(s)?(n(".un_mod_log .un_tips.name").html("").removeClass("no yes"),a&&/[\s|\S]{6,32}/.test(a)?(Union.logFn.ieHack(),n(".un_mod_log .un_tips.pass").html("正在登录···").removeClass("no yes").addClass("yes"),n.ajax({type:"post",url:Union.logFn.doLogUrl,data:{username:s,password:a,auto:e,formtype:"index_log"},dataType:"json",success:function(o){if(1==o.status){switch(Union.logFn.defaults.logAction){case 0:location.reload();break;case 1:location.href=Union.logFn.defaults.logedCallUrl;break;case 2:Union.logFn.getUserInfo({name:s,pass:a,status:1}),Union.logFn.close()}"function"==typeof Union.logFn.callBacks&&Union.logFn.callBacks()}else n(".un_mod_log .un_tips.pass").html(o.info).addClass("no"),Union.logFn.ieHack()}})):(n(".un_mod_log .un_tips.pass").html(Union.logFn.msg[2]).addClass("no"),Union.logFn.ieHack())):(n(".un_mod_log .un_tips.name").html(Union.logFn.msg[1]).addClass("no"),Union.logFn.ieHack())},doReg:function(){function s(){n(".un_mod_reg .un_tips").html("").removeClass("no yes"),n(".un_mod_reg .un_tips.repass").html("正在注册···"),n.ajax({type:"post",url:Union.logFn.doLogUrl,data:{name:a,password:e,repassword:t,rname:i,idcard:l,formtype:"registerform",from:Union.logFn.defaults.refer},dataType:"json",success:function(s){if(1==s.status){if(n.extend(Union.logFn.userInfo,{name:a,pass:e,status:1}),1==Union.logFn.defaults.showSave)n(".un_mod_reg,.un_mod_save").toggle(),n(".un_msg .logs,.un_msg .saves").toggle(),n(".un_mod_save .nameTxt").html(a),n(".un_mod_save .passTxt").html(e),n(".un_mod_save .saveTxt a").attr({href:Union.logFn.defaults.saveInfo+"u="+a+"&p="+e}),n(".un_btns_done").bind("click",function(){switch(Union.logFn.defaults.regAction){case 0:location.reload();break;case 1:location.href=Union.logFn.defaults.logedCallUrl;break;case 2:Union.logFn.close()}});else switch(Union.logFn.defaults.regAction){case 0:location.reload();break;case 1:location.href=Union.logFn.defaults.logedCallUrl;break;case 2:Union.logFn.close()}"function"==typeof Union.logFn.callBacks&&Union.logFn.callBacks(a)}else n(".un_mod_reg .un_tips.repass").html(s.info).addClass("no")}})}o.push(["_trackEvent","web7k通行证","注册","注册按钮","",""]);var a=n("#un_rname").val(),e=n("#un_rpass").val(),t=n("#un_repass").val(),i=n("#un_rrname").val(),l=n("#un_rrnum").val();if(n(".un_mod_reg .un_tips").html("").removeClass("yes no"),a&&/^[a-zA-Z0-9][a-zA-Z0-9_]{4,32}$/.test(a)){if(Union.logFn.checkName(a),Union.logFn.isCheck)if(e&&/[\s|\S]{6,32}/.test(e))if(t===e)if(1==Union.logFn.defaults.isVaildIdcard&&1==Union.logFn.gVaildIdcard)if(i&&/^[\u4e00-\u9fa5]{2,12}$/.test(i))if(l&&/\d{18}|\d{15}/.test(l)){var d=Union.logFn.isCardID(l);1==d.status?s():n(".un_mod_reg .un_tips.rrnum").html(d.info).addClass("no")}else n(".un_mod_reg .un_tips.rrnum").html(Union.logFn.msg[12]).addClass("no");else n(".un_mod_reg .un_tips.rrname").html(Union.logFn.msg[11]).addClass("no");else s();else n(".un_mod_reg .un_tips.repass").html(Union.logFn.msg[3]).addClass("no");else n(".un_mod_reg .un_tips.rpass").html(Union.logFn.msg[2]).addClass("no")}else n(".un_mod_reg .un_tips.rname").html(Union.logFn.msg[1]).addClass("no")},isCardID:function(n){function s(n){var s,o=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),a=new Array("1","0","X","9","8","7","6","5","4","3","2"),e=0;for(n=n.substr(0,6)+"19"+n.substr(6,n.length-6),s=0;17>s;s++)e+=n.substr(s,1)*o[s];return n+=a[e%11]}var o={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"},a=0,e="ok",t={};15==n.length&&(n=s(n)),/^\d{17}(\d|x)$/i.test(n)||(e="你输入的身份证长度或格式错误"),n=n.replace(/x$/i,"a"),null==o[parseInt(n.substr(0,2))]&&(e="你的身份证地区非法"),sBirthday=n.substr(6,4)+"-"+Number(n.substr(10,2))+"-"+Number(n.substr(12,2));var i=new Date(sBirthday.replace(/-/g,"/")),l=new Date;sBirthday!=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()&&(e="身份证上的出生日期非法"),l.getFullYear()-parseInt(n.substr(6,4))<18&&(e="未满18周岁");for(var d=17;d>=0;d--)a+=Math.pow(2,d)%11*parseInt(n.charAt(17-d),11);if(a%11!=1&&(e="你输入的身份证号非法"),"ok"==e){var r=o[parseInt(n.substr(0,2))]+"|"+sBirthday+"|"+(n.substr(16,1)%2?"男":"女");t.status=1,t.info=r}else t.status=0,t.info=e;return t},showName:function(){var s=n(".logs .un_logName"),o=n(".logs .un_logInfo");if("qq"==this.readCookie("loginfrom"))s.html(this.readCookie("nickname")),o.html(Union.logFn.msg[6]);else if("wx"==this.readCookie("loginfrom"))s.html(this.readCookie("nickname")),o.html(Union.logFn.msg[7]);else{var a=this.readCookie("username")?this.readCookie("username"):this.readCookie("k7_username");s.html(a),n("#un_name").val(a),o.html(Union.logFn.msg[8])}},autoKk:function(){n.ajax({url:this.getkkUrl,type:"GET",dataType:"jsonp",success:function(s){eval(s).kk&&(n(".un_mod_reg #un_rname").val(eval(s).kk),n(".un_mod_reg .un_tips.rname").html(Union.logFn.msg[0]).removeClass("no").addClass("yes"))}})},checkName:function(s){n.ajax({type:"post",url:Union.logFn.chkNameUrl,data:{name:"name",param:s},dataType:"json",success:function(s){"y"==s.status?(n(".un_mod_reg .un_tips.rname").html(Union.logFn.msg[5]).removeClass("no").addClass("yes"),Union.logFn.isCheck=1):(n(".un_mod_reg .un_tips.rname").html(Union.logFn.msg[4]).removeClass("yes").addClass("no"),Union.logFn.isCheck=0)}})},rember:function(){var s=n(Union.logFn.logDomId+" .un_mod_log .un_rem .un_check").hasClass("no"),o=n(Union.logFn.logDomId+" .un_mod_log .un_rem .un_check");s?(o.removeClass("no"),o.attr({style:"background:url(http://n.7k7kimg.cn/uploads/cdn/api/loginPlus/img/chk_1.png) no-repeat;"})):(o.addClass("no"),o.attr({style:"background:url(http://n.7k7kimg.cn/uploads/cdn/api/loginPlus/img/chk_0.png) no-repeat;"}))},getUserInfo:function(s){return n.extend(Union.logFn.userInfo,s),Union.logFn.userInfo},saveInfo:function(s){n(".un_mod_reg,.un_mod_save").toggle(),n(".un_msg .logs,.un_msg .saves").toggle(),n(".un_mod_save .nameTxt").html(s.name),n(".un_mod_save .passTxt").html(s.pass),n(".un_mod_save .saveTxt a").attr({href:Union.logFn.defaults.saveInfo+"u="+s.name+"&p="+s.pass}),n(".un_btns_done").bind("click",function(){Union.logFn.close()})},qqLog:function(){this.thirdLogin({url:"http://8.7k7k.com/Connect2.1/example/oauth/index.php?referer=http%3a%2f%2fweb.7k7k.com%2fapi%2f"+Union.logFn.defaults.qqlogType+".php%3faid%3d11457205%26refer%3d"+Union.logFn.defaults.qqlogCallback,w:454,h:320}),o.push(["_trackEvent","web7k通行证","QQ登录","QQ登录","",""])},thirdLogin:function(s){var o=0,a=1800,e=300,t=0,i={w:454,h:320};i.t=(window.screen.availHeight-30-i.h)/2,i.l=(window.screen.availWidth-10-i.w)/2,n.extend(i,s);var l="width="+i.w+",height="+i.h+",top="+i.t+",left="+i.l+",location=0,menubar=0,resizable=0,scrollbars=1,status=1,titlebar=1,toolbar=0";return Union.logFn.userInfo.status?(clearInterval(t),void location.reload()):(window.open(s.url,"",l),void(t=setInterval(function(){Union.logFn.userInfo.status?(clearInterval(t),location.reload()):o>a&&clearInterval(t),o++},e)))},ieVersion:function(){var n=function(){for(var n=3,s=document.createElement("div"),o=s.getElementsByTagName("i");s.innerHTML="<!--[if gt IE "+ ++n+"]><i></i><![endif]-->",o[0];);return n>4?n:!1}();return n},readCookie:function(n){var s,o="";return"string"==typeof n&&""!==n&&(s=String(document.cookie).match(new RegExp("(?:^| )"+n+"(?:(?:=([^;]*))|;|$)")))&&(o=s[1]?decodeURIComponent(s[1]):""),o},setCookie:function(n,s,o){var a=new Date;a.setDate(a.getDate()+o),document.cookie=n+"="+escape(s)+";path=/;domain=web.7k7k.com"+(null==o?"":";expires="+a.toGMTString())},myDate:function(n){d=new Date(n);var s=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds();return s},ieHack:function(){n(".un_mod_log").css({height:"205px"})},resetHack:function(){n(".un_mod_log").css({height:"195px"})}},n(function(){if(Union.logFn.init(),Union.logFn.ieVersion()<=8){var s=(n(window).width(),n(window).height());n("#Union.logFn_mask").attr("style","width:100%;height:"+s+"px;filter:alpha(opacity=50);zoom:1"),n(Union.logFn.logDomId+" #un_name").bind("click",function(){"用户名/邮箱/KK号"==n(this).val()&&n(this).val("")}),n(Union.logFn.logDomId+" #un_name").bind("blur",function(){""==n(this).val()&&n(this).val("用户名/邮箱/KK号")})}n(Union.logFn.logDomId+" .un_tabs a").bind("click",function(){var s=n(this).index();Union.logFn.toggleUi(s)}),n(Union.logFn.logDomId+" .un_btns_reg").bind("click",function(){Union.logFn.toggleUi(1)}),n(Union.logFn.logDomId+" .un_btns_log").bind("click",function(){Union.logFn.doLog()}),n(Union.logFn.logDomId+" .un_btns_regl").bind("click",function(){Union.logFn.doReg()}),n(Union.logFn.logDomId+" .un_close").bind("click",function(){Union.logFn.close()}),n(Union.logFn.logDomId+" .un_log_qq").bind("click",function(){Union.logFn.qqLog()}),n(Union.logFn.logDomId+" .un_mod_log .un_rem span").bind("click",function(){Union.logFn.rember(),this.onselectstart=document.body.ondrag=function(){return!1}})})}(jQuery);