var Union=window.Union||{},_czc=_czc||[];_czc.push(["_setAccount","30055902"]),Union.logFn={getPassUrl:"http://web.7k7k.com/user/find_passport.php",getkkUrl:"http://zc.7k7k.com/get_pre_kk?callback=",chkNameUrl:"/source/core_Post.php",doLogUrl:"/source/Post.php",cssUrl:"http://n.7k7kimg.cn/uploads/cdn/api/loginPlus/css/reset.min.css?v7k7k1",logDomId:"#union",doMain:"web.7k7k.com",remName:0,isCheck:0,callBacks:"",msg:["这是系统自动分配给你的kk号","4-32位数字、字母、或组合","6-32位数字、字母、_或组合","两次密码不一致","用户名已被注册","用户名可以使用","上次使用QQ登陆","上次使用微信登陆","上次使用账号登陆"],userInfo:{name:"",pass:"",status:0},defaults:{autokk:0,qqLogId:11715896,qqlogType:"qqlogin",qqlogCallback:encodeURIComponent(location.href),logAction:0,logedCallUrl:location.href,regAction:0,showSave:1,saveInfo:"http://web.7k7k.com/api/7k7ktxt.php?",refer:3841},toggleUi:function(n){var o=$(this.logDomId+" .un_tabs a"),s=$(this.logDomId+" .un_tabs a.cur").index();o.removeClass("cur"),o.eq(n).addClass("cur"),$(".un_mod_log .un_tips,.un_mod_reg .un_tips").html("").removeClass("no yes"),$(".un_msg .logs").show(),$(".un_msg .saves").hide(),$(".un_mod_save").hide(),Union.logFn.resetHack(),0==n?($(".un_mod_log").show(),$(".un_mod_reg").hide(),$(".un_tabs span").animate({left:"168px"},150),0==s?_czc.push(["_trackEvent","web7k通行证","登录","登录标签","",""]):_czc.push(["_trackEvent","web7k通行证","注册","登录标签","",""])):(Union.logFn.defaults.autokk&&Union.logFn.autoKk(),$(".un_mod_log").hide(),$(".un_mod_reg").show(),$(".un_tabs span").animate({left:"277px"},150),$(Union.logFn.logDomId+" #un_rname").bind("blur",function(){this.value?Union.logFn.checkName(this.value):$(".un_mod_reg .un_tips.rname").html(Union.logFn.msg[1]).addClass("no")}),0==s?_czc.push(["_trackEvent","web7k通行证","登录","注册标签","",""]):_czc.push(["_trackEvent","web7k通行证","注册","注册标签","",""]));var a=$(this.logDomId).height()/2;$(this.logDomId).animate({"margin-top":"-"+a+"px"},150)},config:function(n){$.extend(Union.logFn.defaults,n)},init:function(){location.host==this.doMain?(this.addCSS(Union.logFn.cssUrl),logHtml='<IFRAME id=union_mask src="about:blank" frameBorder=no style="display:none"></IFRAME>		<div class="union_warp" id="union" style="display:none">			<div class="un_con">				<div class="un_tit">					<a href="http://web.7k7k.com" target="_blank" class="un_logo"></a>					<div class="un_tabs">						<a href="javascript:;" class="cur">用户登录</a>						<a href="javascript:;">用户注册</a>						<span></span>					</div>					<a href="javascript:;" class="un_close"></a>				</div>				<div class="un_login">					<div class="un_inps un_mod_log">						<div class="un_inp name">							<span>用户名&nbsp;:</span>							<input type="text" id="un_name" value="用户名/邮箱/KK号" placeholder="用户名/邮箱/KK号" />						</div>						<div class="un_tips name"></div>						<div class="un_inp pass">							<span>密　码&nbsp;:</span>							<input type="password" id="un_pass" value="" />						</div>						<div class="un_tips pass"></div>						<div class="un_rem">							<span class="un_check"></span>							<span class="un_lable">记住登录账号</span>							<a href="http://web.7k7k.com/user/find_passport.php" target="_blank" class="un_lose_pass">忘记密码?</a>							<div class="clear"></div>						</div>						<div class="un_btns">							<a href="javascript:;" class="un_btns_log">登录</a>							<a href="javascript:;" class="un_btns_reg">注册</a>							<div class="clear"></div>						</div>					</div>					<div class="un_inps un_mod_reg">						<div class="un_inp rname">							<span>用户名&nbsp;:</span>							<input type="text" id="un_rname" value="" placeholder="'+Union.logFn.msg[1]+'" />						</div>						<div class="un_tips rname"></div>						<div class="un_inp rpass">							<span>密　码&nbsp;:</span>							<input type="password" id="un_rpass" value="" placeholder="'+Union.logFn.msg[2]+'" />						</div>						<div class="un_tips rpass"></div>						<div class="un_inp surePass rpass">							<span>确认密码&nbsp;:</span>							<input type="password" id="un_repass" value="" />						</div>						<div class="un_tips repass"></div>						<div class="un_rem">							<span class="un_check"></span>							<a href="http://www.7k7k.com/html/duty.htm" target="_blank" class="un_lose_pass">已阅读《用户服务协议》</a>							<div class="clear"></div>						</div>						<div class="un_btns">							<a href="javascript:;" class="un_btns_regl">注册</a>							<div class="clear"></div>						</div>					</div>					<div class="un_inps un_mod_save">						<p class="save_tit">注册成功！</p>						<div class="save_info">							<div class="savediv save_name">								<span class="sdtit">用户名:</span>								<span class="nameTxt"></span>							</div>							<div class="savediv save_pass">								<span class="sdtit">密码:</span>								<span class="passTxt"></span>							</div>						</div>						<p class="saveTxt">赶紧拿笔记下，或<a href="">保存至桌面</a></p>						<div class="un_btns">							<a href="javascript:;" class="un_btns_done">完成</a>							<div class="clear"></div>						</div>					</div>					<div class="un_msg">						<div class="logs">							<a href="javascript:;" class="un_log_qq"></a>							<p class="un_logName"></p>							<p class="un_logInfo"></p>						</div>						<div class="saves">							<p class="tipst">温馨提示</p>							<p class="tipTxt">为抵御盗号风险，90%的用户都会选择<a target="_blank" href="http://web.7k7k.com/user/index.php">设置密码保护</a></p>						</div>					</div>					<div class="clear"></div>				</div>			</div>			<div class="un_bot"></div>		</div>',$("body").append(logHtml),Union.logFn.showName(),$(".un_mod_log .un_inp input").bind("keypress",function(n){var n=n||event;13==n.keyCode&&Union.logFn.doLog()}),$(".un_mod_reg .un_inp input").bind("keypress",function(n){var n=n||event;13==n.keyCode&&Union.logFn.doReg()})):window.document.domain=Union.logFn.doMain},open:function(n){var o=$(this.logDomId).height()/2;$(".un_mod_log .un_tips,.un_mod_reg .un_tips").html("").removeClass("no yes"),$(this.logDomId+"_mask").fadeIn().css({display:"block"}),$(this.logDomId).show().animate({top:"50%",opacity:"1","margin-top":"-"+o+"px"},150),"function"==typeof n&&(Union.logFn.callBacks=n)},close:function(){$(this.logDomId).animate({top:"-100%",opacity:"0"},150,function(){$(this).hide(),$(Union.logFn.logDomId+"_mask").fadeOut()})},addCSS:function(n){var o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=n,document.getElementsByTagName("head")[0].appendChild(o)},doLog:function(){_czc.push(["_trackEvent","web7k通行证","登录","登录按钮","",""]);var n=$("#un_name").val(),o=$("#un_pass").val(),s=Union.logFn.remName;Union.logFn.resetHack(),$(".un_mod_log .un_tips").html("").removeClass("yes no"),n&&/^[a-zA-Z0-9][a-zA-Z0-9_.@]{3,32}$/.test(n)?($(".un_mod_log .un_tips.name").html("").removeClass("no yes"),o&&/[\s|\S]{6,32}/.test(o)?(Union.logFn.ieHack(),$(".un_mod_log .un_tips.pass").html("正在登录···").removeClass("no yes").addClass("yes"),$.ajax({type:"post",url:Union.logFn.doLogUrl,data:{username:n,password:o,auto:s,formtype:"index_log"},dataType:"json",success:function(s){if(1==s.status){switch(Union.logFn.defaults.logAction){case 0:location.reload();break;case 1:location.href=Union.logFn.defaults.logedCallUrl;break;case 2:Union.logFn.getUserInfo({name:n,pass:o,status:1}),Union.logFn.close()}"function"==typeof Union.logFn.callBacks&&Union.logFn.callBacks()}else $(".un_mod_log .un_tips.pass").html(s.info).addClass("no"),Union.logFn.ieHack()}})):($(".un_mod_log .un_tips.pass").html(Union.logFn.msg[2]).addClass("no"),Union.logFn.ieHack())):($(".un_mod_log .un_tips.name").html(Union.logFn.msg[1]).addClass("no"),Union.logFn.ieHack())},doReg:function(){_czc.push(["_trackEvent","web7k通行证","注册","注册按钮","",""]);var n=$("#un_rname").val(),o=$("#un_rpass").val(),s=$("#un_repass").val();$(".un_mod_reg .un_tips").removeClass("yes no"),n&&/^[a-zA-Z0-9][a-zA-Z0-9_]{4,32}$/.test(n)?(Union.logFn.checkName(n),Union.logFn.isCheck&&(o&&/[\s|\S]{6,32}/.test(o)?($(".un_mod_reg .un_tips.rpass").html("").removeClass("no yes"),s===o?($(".un_mod_reg .un_tips").html("").removeClass("no yes"),$(".un_mod_reg .un_tips.repass").html("正在注册···"),$.ajax({type:"post",url:Union.logFn.doLogUrl,data:{name:n,password:o,repassword:s,formtype:"registerform",from:Union.logFn.defaults.refer},dataType:"json",success:function(s){if(1==s.status)if(1==Union.logFn.defaults.showSave)$(".un_mod_reg,.un_mod_save").toggle(),$(".un_msg .logs,.un_msg .saves").toggle(),$(".un_mod_save .nameTxt").html(n),$(".un_mod_save .passTxt").html(o),$(".un_mod_save .saveTxt a").attr({href:Union.logFn.defaults.saveInfo+"u="+n+"&p="+o}),$(".un_btns_done").bind("click",function(){switch(Union.logFn.defaults.regAction){case 0:location.reload();break;case 1:location.href=Union.logFn.defaults.logedCallUrl;break;case 2:$.extend(Union.logFn.userInfo,{name:n,pass:o,status:1}),Union.logFn.close()}});else switch(Union.logFn.defaults.regAction){case 0:location.reload();break;case 1:location.href=Union.logFn.defaults.logedCallUrl;break;case 2:$.extend(Union.logFn.userInfo,{name:n,pass:o,status:1}),Union.logFn.close()}else $(".un_mod_reg .un_tips.repass").html(s.info).addClass("no")}})):$(".un_mod_reg .un_tips.repass").html(Union.logFn.msg[3]).addClass("no")):$(".un_mod_reg .un_tips.rpass").html(Union.logFn.msg[2]).addClass("no"))):$(".un_mod_reg .un_tips.rname").html(Union.logFn.msg[1]).addClass("no")},showName:function(){var n=$(".logs .un_logName"),o=$(".logs .un_logInfo");if("qq"==this.readCookie("loginfrom"))n.html(this.readCookie("nickname")),o.html(Union.logFn.msg[6]);else if("wx"==this.readCookie("loginfrom"))n.html(this.readCookie("nickname")),o.html(Union.logFn.msg[7]);else{var s=this.readCookie("username")?this.readCookie("username"):this.readCookie("k7_username");n.html(s),$("#un_name").val(s),o.html(Union.logFn.msg[8])}},autoKk:function(){$.ajax({url:this.getkkUrl,type:"GET",dataType:"jsonp",success:function(json){eval(json).kk&&($(".un_mod_reg #un_rname").val(eval(json).kk),$(".un_mod_reg .un_tips.rname").html(Union.logFn.msg[0]).removeClass("no").addClass("yes"))}})},checkName:function(n){$.ajax({type:"post",url:Union.logFn.chkNameUrl,data:{name:"name",param:n},dataType:"json",success:function(n){"y"==n.status?($(".un_mod_reg .un_tips.rname").html(Union.logFn.msg[5]).removeClass("no").addClass("yes"),Union.logFn.isCheck=1):($(".un_mod_reg .un_tips.rname").html(Union.logFn.msg[4]).removeClass("yes").addClass("no"),Union.logFn.isCheck=0)}})},rember:function(){var n=$(Union.logFn.logDomId+" .un_mod_log .un_rem .un_check").hasClass("no"),o=$(Union.logFn.logDomId+" .un_mod_log .un_rem .un_check");n?(o.removeClass("no"),o.attr({style:"background:url(http://n.7k7kimg.cn/uploads/cdn/api/loginPlus/img/chk_1.png) no-repeat;"})):(o.addClass("no"),o.attr({style:"background:url(http://n.7k7kimg.cn/uploads/cdn/api/loginPlus/img/chk_0.png) no-repeat;"}))},getUserInfo:function(n){return $.extend(Union.logFn.userInfo,n),Union.logFn.userInfo},saveInfo:function(n){$(".un_mod_reg,.un_mod_save").toggle(),$(".un_msg .logs,.un_msg .saves").toggle(),$(".un_mod_save .nameTxt").html(n.name),$(".un_mod_save .passTxt").html(n.pass),$(".un_mod_save .saveTxt a").attr({href:Union.logFn.defaults.saveInfo+"u="+n.name+"&p="+n.pass}),$(".un_btns_done").bind("click",function(){Union.logFn.close()})},qqLog:function(){this.thirdLogin({url:"http://8.7k7k.com/Connect2.1/example/oauth/index.php?referer=http%3a%2f%2fweb.7k7k.com%2fapi%2f"+Union.logFn.defaults.qqlogType+".php%3faid%3d11457205%26refer%3d"+Union.logFn.defaults.qqlogCallback,w:454,h:320}),_czc.push(["_trackEvent","web7k通行证","QQ登录","QQ登录","",""])},thirdLogin:function(n){var o=0,s=1800,a=300,e=0,i={w:454,h:320};i.t=(window.screen.availHeight-30-i.h)/2,i.l=(window.screen.availWidth-10-i.w)/2,$.extend(i,n);var t="width="+i.w+",height="+i.h+",top="+i.t+",left="+i.l+",location=0,menubar=0,resizable=0,scrollbars=1,status=1,titlebar=1,toolbar=0";return Union.logFn.userInfo.status?(clearInterval(e),void location.reload()):(window.open(n.url,"",t),void(e=setInterval(function(){Union.logFn.userInfo.status?(clearInterval(e),location.reload()):o>s&&clearInterval(e),o++},a)))},ieVersion:function(){var n=function(){for(var n=3,o=document.createElement("div"),s=o.getElementsByTagName("i");o.innerHTML="<!--[if gt IE "+ ++n+"]><i></i><![endif]-->",s[0];);return n>4?n:!1}();return n},readCookie:function(n){var o,s="";return"string"==typeof n&&""!==n&&(o=String(document.cookie).match(new RegExp("(?:^| )"+n+"(?:(?:=([^;]*))|;|$)")))&&(s=o[1]?decodeURIComponent(o[1]):""),s},setCookie:function(n,o,s){var a=new Date;a.setDate(a.getDate()+s),document.cookie=n+"="+escape(o)+";path=/;domain=web.7k7k.com"+(null==s?"":";expires="+a.toGMTString())},myDate:function(n){d=new Date(n);var o=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds();return o},ieHack:function(){$(".un_mod_log").css({height:"205px"})},resetHack:function(){$(".un_mod_log").css({height:"195px"})}},function(n,o){if(Union.logFn.init(),Union.logFn.ieVersion()<=8){var s=(o(n).width(),o(n).height());o("#Union.logFn_mask").attr("style","width:100%;height:"+s+"px;filter:alpha(opacity=50);zoom:1"),o(Union.logFn.logDomId+" #un_name").bind("click",function(){"用户名/邮箱/KK号"==o(this).val()&&o(this).val("")}),o(Union.logFn.logDomId+" #un_name").bind("blur",function(){""==o(this).val()&&o(this).val("用户名/邮箱/KK号")})}o(Union.logFn.logDomId+" .un_tabs a").bind("click",function(){var n=o(this).index();Union.logFn.toggleUi(n)}),o(Union.logFn.logDomId+" .un_btns_reg").bind("click",function(){Union.logFn.toggleUi(1)}),o(Union.logFn.logDomId+" .un_btns_log").bind("click",function(){Union.logFn.doLog()}),o(Union.logFn.logDomId+" .un_btns_regl").bind("click",function(){Union.logFn.doReg()}),o(Union.logFn.logDomId+" .un_close").bind("click",function(){Union.logFn.close()}),o(Union.logFn.logDomId+" .un_log_qq").bind("click",function(){Union.logFn.qqLog()}),o(Union.logFn.logDomId+" .un_mod_log .un_rem span").bind("click",function(){Union.logFn.rember(),this.onselectstart=document.body.ondrag=function(){return!1}})}(window,jQuery);