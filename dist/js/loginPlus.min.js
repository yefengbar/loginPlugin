var _czc=_czc||[];_czc.push(["_setAccount","30055902"]);var Union={getPassUrl:"http://web.7k7k.com/user/find_passport.php",getkkUrl:"http://zc.7k7k.com/get_pre_kk?callback=",chkNameUrl:"/source/core_Post.php",doLogUrl:"/source/Post.php",cssUrl:"http://n.7k7kimg.cn/uploads/cdn/api/loginPlus/css/reset.min.css?v7k7k1",logDomId:"#union",doMain:"web.7k7k.com",remName:0,isCheck:0,callBacks:"",msg:["这是系统自动分配给你的kk号","4-32位数字、字母、或组合","6-32位数字、字母、_或组合","两次密码不一致","用户名已被注册","用户名可以使用","上次使用QQ登陆","上次使用微信登陆","上次使用账号登陆"],userInfo:{name:"",pass:"",status:0},defaults:{autokk:0,qqLogId:11715896,qqlogType:"qqlogin",qqlogCallback:encodeURIComponent(location.href),logAction:0,logedCallUrl:location.href,regAction:0,showSave:1,saveInfo:"http://web.7k7k.com/api/7k7ktxt.php?",refer:3841},toggleUi:function(n){var s=$(this.logDomId+" .un_tabs a"),a=$(this.logDomId+" .un_tabs a.cur").index();s.removeClass("cur"),s.eq(n).addClass("cur"),$(".un_mod_log .un_tips,.un_mod_reg .un_tips").html("").removeClass("no yes"),$(".un_msg .logs").show(),$(".un_msg .saves").hide(),$(".un_mod_save").hide(),Union.resetHack(),0==n?($(".un_mod_log").show(),$(".un_mod_reg").hide(),$(".un_tabs span").animate({left:"168px"},150),0==a?_czc.push(["_trackEvent","web7k通行证","登录","登录标签","",""]):_czc.push(["_trackEvent","web7k通行证","注册","登录标签","",""])):(Union.defaults.autokk&&Union.autoKk(),$(".un_mod_log").hide(),$(".un_mod_reg").show(),$(".un_tabs span").animate({left:"277px"},150),$(Union.logDomId+" #un_rname").bind("blur",function(){this.value?Union.checkName(this.value):$(".un_mod_reg .un_tips.rname").html(Union.msg[1]).addClass("no")}),0==a?_czc.push(["_trackEvent","web7k通行证","登录","注册标签","",""]):_czc.push(["_trackEvent","web7k通行证","注册","注册标签","",""]));var e=$(this.logDomId).height()/2;$(this.logDomId).animate({"margin-top":"-"+e+"px"},150)},config:function(n){$.extend(Union.defaults,n)},init:function(){location.host==this.doMain?(this.addCSS(Union.cssUrl),logHtml='<IFRAME id=union_mask src="about:blank" frameBorder=no></IFRAME>		<div class="union_warp" id="union">			<div class="un_con">				<div class="un_tit">					<a href="http://web.7k7k.com" target="_blank" class="un_logo"></a>					<div class="un_tabs">						<a href="javascript:;" class="cur">用户登录</a>						<a href="javascript:;">用户注册</a>						<span></span>					</div>					<a href="javascript:;" class="un_close"></a>				</div>				<div class="un_login">					<div class="un_inps un_mod_log">						<div class="un_inp name">							<span>用户名&nbsp;:</span>							<input type="text" id="un_name" value="用户名/邮箱/KK号" placeholder="用户名/邮箱/KK号" />						</div>						<div class="un_tips name"></div>						<div class="un_inp pass">							<span>密　码&nbsp;:</span>							<input type="password" id="un_pass" value="" />						</div>						<div class="un_tips pass"></div>						<div class="un_rem">							<span class="un_check"></span>							<span class="un_lable">记住登录账号</span>							<a href="http://web.7k7k.com/user/find_passport.php" target="_blank" class="un_lose_pass">忘记密码?</a>							<div class="clear"></div>						</div>						<div class="un_btns">							<a href="javascript:;" class="un_btns_log">登录</a>							<a href="javascript:;" class="un_btns_reg">注册</a>							<div class="clear"></div>						</div>					</div>					<div class="un_inps un_mod_reg">						<div class="un_inp rname">							<span>用户名&nbsp;:</span>							<input type="text" id="un_rname" value="" placeholder="'+Union.msg[1]+'" />						</div>						<div class="un_tips rname"></div>						<div class="un_inp rpass">							<span>密　码&nbsp;:</span>							<input type="password" id="un_rpass" value="" placeholder="'+Union.msg[2]+'" />						</div>						<div class="un_tips rpass"></div>						<div class="un_inp surePass rpass">							<span>确认密码&nbsp;:</span>							<input type="password" id="un_repass" value="" />						</div>						<div class="un_tips repass"></div>						<div class="un_rem">							<span class="un_check"></span>							<a href="http://www.7k7k.com/html/duty.htm" target="_blank" class="un_lose_pass">已阅读《用户服务协议》</a>							<div class="clear"></div>						</div>						<div class="un_btns">							<a href="javascript:;" class="un_btns_regl">注册</a>							<div class="clear"></div>						</div>					</div>					<div class="un_inps un_mod_save">						<p class="save_tit">注册成功！</p>						<div class="save_info">							<div class="savediv save_name">								<span class="sdtit">用户名:</span>								<span class="nameTxt"></span>							</div>							<div class="savediv save_pass">								<span class="sdtit">密码:</span>								<span class="passTxt"></span>							</div>						</div>						<p class="saveTxt">赶紧拿笔记下，或<a href="">保存至桌面</a></p>						<div class="un_btns">							<a href="javascript:;" class="un_btns_done">完成</a>							<div class="clear"></div>						</div>					</div>					<div class="un_msg">						<div class="logs">							<a href="javascript:;" class="un_log_qq"></a>							<p class="un_logName"></p>							<p class="un_logInfo"></p>						</div>						<div class="saves">							<p class="tipst">温馨提示</p>							<p class="tipTxt">为抵御盗号风险，90%的用户都会选择<a target="_blank" href="http://web.7k7k.com/user/index.php">设置密码保护</a></p>						</div>					</div>					<div class="clear"></div>				</div>			</div>			<div class="un_bot"></div>		</div>',$("body").append(logHtml),Union.showName(),$(".un_mod_log .un_inp input").bind("keypress",function(n){var n=n||event;13==n.keyCode&&Union.doLog()}),$(".un_mod_reg .un_inp input").bind("keypress",function(n){var n=n||event;13==n.keyCode&&Union.doReg()})):window.document.domain=Union.doMain},open:function(n){var s=$(this.logDomId).height()/2;$(".un_mod_log .un_tips,.un_mod_reg .un_tips").html("").removeClass("no yes"),$(this.logDomId+"_mask").fadeIn().css({display:"block"}),$(this.logDomId).show().animate({top:"50%",opacity:"1","margin-top":"-"+s+"px"},150),"function"==typeof n&&(Union.callBacks=n)},close:function(){$(this.logDomId).animate({top:"-100%",opacity:"0"},150,function(){$(this).hide(),$(Union.logDomId+"_mask").fadeOut()})},addCSS:function(n){var s=document.createElement("link");s.type="text/css",s.rel="stylesheet",s.href=n,document.getElementsByTagName("head")[0].appendChild(s)},doLog:function(){_czc.push(["_trackEvent","web7k通行证","登录","登录按钮","",""]);var n=$("#un_name").val(),s=$("#un_pass").val(),a=Union.remName;Union.resetHack(),$(".un_mod_log .un_tips").html("").removeClass("yes no"),n&&/^[a-zA-Z0-9][a-zA-Z0-9_.@]{4,32}$/.test(n)?($(".un_mod_log .un_tips.name").html("").removeClass("no yes"),s&&/[\s|\S]{6,32}/.test(s)?(Union.ieHack(),$(".un_mod_log .un_tips.pass").html("正在登录···").removeClass("no yes").addClass("yes"),$.ajax({type:"post",url:Union.doLogUrl,data:{username:n,password:s,auto:a,formtype:"index_log"},dataType:"json",success:function(a){if(1==a.status){switch(Union.defaults.logAction){case 0:location.reload();break;case 1:location.href=Union.defaults.logedCallUrl;break;case 2:Union.getUserInfo({name:n,pass:s,status:1}),Union.close()}"function"==typeof Union.callBacks&&Union.callBacks()}else $(".un_mod_log .un_tips.pass").html(a.info).addClass("no"),Union.ieHack()}})):($(".un_mod_log .un_tips.pass").html(Union.msg[2]).addClass("no"),Union.ieHack())):($(".un_mod_log .un_tips.name").html(Union.msg[1]).addClass("no"),Union.ieHack())},doReg:function(){_czc.push(["_trackEvent","web7k通行证","注册","注册按钮","",""]);var n=$("#un_rname").val(),s=$("#un_rpass").val(),a=$("#un_repass").val();$(".un_mod_reg .un_tips").removeClass("yes no"),n&&/^[a-zA-Z0-9][a-zA-Z0-9_]{4,32}$/.test(n)?(Union.checkName(n),Union.isCheck&&(s&&/[\s|\S]{6,32}/.test(s)?($(".un_mod_reg .un_tips.rpass").html("").removeClass("no yes"),a===s?($(".un_mod_reg .un_tips").html("").removeClass("no yes"),$(".un_mod_reg .un_tips.repass").html("正在注册···"),$.ajax({type:"post",url:Union.doLogUrl,data:{name:n,password:s,repassword:a,formtype:"registerform",from:Union.defaults.refer},dataType:"json",success:function(a){if(1==a.status)if(1==Union.defaults.showSave)$(".un_mod_reg,.un_mod_save").toggle(),$(".un_msg .logs,.un_msg .saves").toggle(),$(".un_mod_save .nameTxt").html(n),$(".un_mod_save .passTxt").html(s),$(".un_mod_save .saveTxt a").attr({href:Union.defaults.saveInfo+"u="+n+"&p="+s}),$(".un_btns_done").bind("click",function(){switch(Union.defaults.regAction){case 0:location.reload();break;case 1:location.href=Union.defaults.logedCallUrl;break;case 2:$.extend(Union.userInfo,{name:n,pass:s,status:1}),Union.close()}});else switch(Union.defaults.regAction){case 0:location.reload();break;case 1:location.href=Union.defaults.logedCallUrl;break;case 2:$.extend(Union.userInfo,{name:n,pass:s,status:1}),Union.close()}else $(".un_mod_reg .un_tips.repass").html(a.info).addClass("no")}})):$(".un_mod_reg .un_tips.repass").html(Union.msg[3]).addClass("no")):$(".un_mod_reg .un_tips.rpass").html(Union.msg[2]).addClass("no"))):$(".un_mod_reg .un_tips.rname").html(Union.msg[1]).addClass("no")},showName:function(){var n=$(".logs .un_logName"),s=$(".logs .un_logInfo");if("qq"==this.readCookie("loginfrom"))n.html(this.readCookie("nickname")),s.html(Union.msg[6]);else if("wx"==this.readCookie("loginfrom"))n.html(this.readCookie("nickname")),s.html(Union.msg[7]);else{var a=this.readCookie("username")?this.readCookie("username"):this.readCookie("k7_username");n.html(a),$("#un_name").val(a),s.html(Union.msg[8])}},autoKk:function(){$.ajax({url:this.getkkUrl,type:"GET",dataType:"jsonp",success:function(json){eval(json).kk&&($(".un_mod_reg #un_rname").val(eval(json).kk),$(".un_mod_reg .un_tips.rname").html(Union.msg[0]).removeClass("no").addClass("yes"))}})},checkName:function(n){$.ajax({type:"post",url:Union.chkNameUrl,data:{name:"name",param:n},dataType:"json",success:function(n){"y"==n.status?($(".un_mod_reg .un_tips.rname").html(Union.msg[5]).removeClass("no").addClass("yes"),Union.isCheck=1):($(".un_mod_reg .un_tips.rname").html(Union.msg[4]).removeClass("yes").addClass("no"),Union.isCheck=0)}})},rember:function(){var n=$(Union.logDomId+" .un_mod_log .un_rem .un_check").hasClass("no"),s=$(Union.logDomId+" .un_mod_log .un_rem .un_check");n?(s.removeClass("no"),s.attr({style:"background:url(http://n.7k7kimg.cn/uploads/cdn/api/loginPlus/img/chk_1.png) no-repeat;"})):(s.addClass("no"),s.attr({style:"background:url(http://n.7k7kimg.cn/uploads/cdn/api/loginPlus/img/chk_0.png) no-repeat;"}))},getUserInfo:function(n){return $.extend(Union.userInfo,n),Union.userInfo},saveInfo:function(n){$(".un_mod_reg,.un_mod_save").toggle(),$(".un_msg .logs,.un_msg .saves").toggle(),$(".un_mod_save .nameTxt").html(n.name),$(".un_mod_save .passTxt").html(n.pass),$(".un_mod_save .saveTxt a").attr({href:Union.defaults.saveInfo+"u="+n.name+"&p="+n.pass}),$(".un_btns_done").bind("click",function(){Union.close()})},qqLog:function(){this.thirdLogin({url:"http://8.7k7k.com/Connect2.1/example/oauth/index.php?referer=http%3a%2f%2fweb.7k7k.com%2fapi%2f"+Union.defaults.qqlogType+".php%3faid%3d11457205%26refer%3d"+Union.defaults.qqlogCallback,w:454,h:320}),_czc.push(["_trackEvent","web7k通行证","QQ登录","QQ登录","",""])},thirdLogin:function(n){var s=0,a=1800,e=300,o=0,t={w:454,h:320};t.t=(window.screen.availHeight-30-t.h)/2,t.l=(window.screen.availWidth-10-t.w)/2,$.extend(t,n);var i="width="+t.w+",height="+t.h+",top="+t.t+",left="+t.l+",location=0,menubar=0,resizable=0,scrollbars=1,status=1,titlebar=1,toolbar=0";return Union.userInfo.status?(clearInterval(o),void location.reload()):(window.open(n.url,"",i),void(o=setInterval(function(){Union.userInfo.status?(clearInterval(o),location.reload()):s>a&&clearInterval(o),s++},e)))},ieVersion:function(){var n=function(){for(var n=3,s=document.createElement("div"),a=s.getElementsByTagName("i");s.innerHTML="<!--[if gt IE "+ ++n+"]><i></i><![endif]-->",a[0];);return n>4?n:!1}();return n},readCookie:function(n){var s,a="";return"string"==typeof n&&""!==n&&(s=String(document.cookie).match(new RegExp("(?:^| )"+n+"(?:(?:=([^;]*))|;|$)")))&&(a=s[1]?decodeURIComponent(s[1]):""),a},setCookie:function(n,s,a){var e=new Date;e.setDate(e.getDate()+a),document.cookie=n+"="+escape(s)+";path=/;domain=web.7k7k.com"+(null==a?"":";expires="+e.toGMTString())},myDate:function(n){d=new Date(n);var s=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" "+d.getHours()+":"+d.getMinutes()+":"+d.getSeconds();return s},ieHack:function(){$(".un_mod_log").css({height:"205px"})},resetHack:function(){$(".un_mod_log").css({height:"195px"})}};!function(n,s){if(Union.init(),Union.ieVersion()<=8){var a=(s(n).width(),s(n).height());s("#union_mask").attr("style","width:100%;height:"+a+"px;filter:alpha(opacity=50);zoom:1"),s(Union.logDomId+" #un_name").bind("click",function(){"用户名/邮箱/KK号"==s(this).val()&&s(this).val("")}),s(Union.logDomId+" #un_name").bind("blur",function(){""==s(this).val()&&s(this).val("用户名/邮箱/KK号")})}s(Union.logDomId+" .un_tabs a").bind("click",function(){var n=s(this).index();Union.toggleUi(n)}),s(Union.logDomId+" .un_btns_reg").bind("click",function(){Union.toggleUi(1)}),s(Union.logDomId+" .un_btns_log").bind("click",function(){Union.doLog()}),s(Union.logDomId+" .un_btns_regl").bind("click",function(){Union.doReg()}),s(Union.logDomId+" .un_close").bind("click",function(){Union.close()}),s(Union.logDomId+" .un_log_qq").bind("click",function(){Union.qqLog()}),s(Union.logDomId+" .un_mod_log .un_rem span").bind("click",function(){Union.rember(),this.onselectstart=document.body.ondrag=function(){return!1}})}(window,jQuery);